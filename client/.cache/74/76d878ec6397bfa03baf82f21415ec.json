{"id":"node_modules/inversify/lib/resolution/resolver.js","dependencies":[{"name":"C:\\inspace\\inspace_\\client\\node_modules\\inversify\\lib\\resolution\\resolver.js.map","includedInParent":true,"mtime":1623879764472},{"name":"C:\\inspace\\inspace_\\client\\package.json","includedInParent":true,"mtime":1624574747203},{"name":"C:\\inspace\\inspace_\\client\\node_modules\\inversify\\package.json","includedInParent":true,"mtime":1623879764472},{"name":"../constants/error_msgs","loc":{"line":4,"column":25},"parent":"C:\\inspace\\inspace_\\client\\node_modules\\inversify\\lib\\resolution\\resolver.js","resolved":"C:\\inspace\\inspace_\\client\\node_modules\\inversify\\lib\\constants\\error_msgs.js"},{"name":"../constants/literal_types","loc":{"line":5,"column":30},"parent":"C:\\inspace\\inspace_\\client\\node_modules\\inversify\\lib\\resolution\\resolver.js","resolved":"C:\\inspace\\inspace_\\client\\node_modules\\inversify\\lib\\constants\\literal_types.js"},{"name":"../utils/exceptions","loc":{"line":6,"column":27},"parent":"C:\\inspace\\inspace_\\client\\node_modules\\inversify\\lib\\resolution\\resolver.js","resolved":"C:\\inspace\\inspace_\\client\\node_modules\\inversify\\lib\\utils\\exceptions.js"},{"name":"../utils/serialization","loc":{"line":7,"column":30},"parent":"C:\\inspace\\inspace_\\client\\node_modules\\inversify\\lib\\resolution\\resolver.js","resolved":"C:\\inspace\\inspace_\\client\\node_modules\\inversify\\lib\\utils\\serialization.js"},{"name":"./instantiation","loc":{"line":8,"column":30},"parent":"C:\\inspace\\inspace_\\client\\node_modules\\inversify\\lib\\resolution\\resolver.js","resolved":"C:\\inspace\\inspace_\\client\\node_modules\\inversify\\lib\\resolution\\instantiation.js"}],"generated":{"js":"\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.resolve = void 0;\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar exceptions_1 = require(\"../utils/exceptions\");\nvar serialization_1 = require(\"../utils/serialization\");\nvar instantiation_1 = require(\"./instantiation\");\nvar invokeFactory = function (factoryType, serviceIdentifier, fn) {\n    try {\n        return fn();\n    }\n    catch (error) {\n        if (exceptions_1.isStackOverflowExeption(error)) {\n            throw new Error(ERROR_MSGS.CIRCULAR_DEPENDENCY_IN_FACTORY(factoryType, serviceIdentifier.toString()));\n        }\n        else {\n            throw error;\n        }\n    }\n};\nvar _resolveRequest = function (requestScope) {\n    return function (request) {\n        request.parentContext.setCurrentRequest(request);\n        var bindings = request.bindings;\n        var childRequests = request.childRequests;\n        var targetIsAnArray = request.target && request.target.isArray();\n        var targetParentIsNotAnArray = !request.parentRequest ||\n            !request.parentRequest.target ||\n            !request.target ||\n            !request.parentRequest.target.matchesArray(request.target.serviceIdentifier);\n        if (targetIsAnArray && targetParentIsNotAnArray) {\n            return childRequests.map(function (childRequest) {\n                var _f = _resolveRequest(requestScope);\n                return _f(childRequest);\n            });\n        }\n        else {\n            var result = null;\n            if (request.target.isOptional() && bindings.length === 0) {\n                return undefined;\n            }\n            var binding_1 = bindings[0];\n            var isSingleton = binding_1.scope === literal_types_1.BindingScopeEnum.Singleton;\n            var isRequestSingleton = binding_1.scope === literal_types_1.BindingScopeEnum.Request;\n            if (isSingleton && binding_1.activated) {\n                return binding_1.cache;\n            }\n            if (isRequestSingleton &&\n                requestScope !== null &&\n                requestScope.has(binding_1.id)) {\n                return requestScope.get(binding_1.id);\n            }\n            if (binding_1.type === literal_types_1.BindingTypeEnum.ConstantValue) {\n                result = binding_1.cache;\n                binding_1.activated = true;\n            }\n            else if (binding_1.type === literal_types_1.BindingTypeEnum.Function) {\n                result = binding_1.cache;\n                binding_1.activated = true;\n            }\n            else if (binding_1.type === literal_types_1.BindingTypeEnum.Constructor) {\n                result = binding_1.implementationType;\n            }\n            else if (binding_1.type === literal_types_1.BindingTypeEnum.DynamicValue && binding_1.dynamicValue !== null) {\n                result = invokeFactory(\"toDynamicValue\", binding_1.serviceIdentifier, function () { return binding_1.dynamicValue(request.parentContext); });\n            }\n            else if (binding_1.type === literal_types_1.BindingTypeEnum.Factory && binding_1.factory !== null) {\n                result = invokeFactory(\"toFactory\", binding_1.serviceIdentifier, function () { return binding_1.factory(request.parentContext); });\n            }\n            else if (binding_1.type === literal_types_1.BindingTypeEnum.Provider && binding_1.provider !== null) {\n                result = invokeFactory(\"toProvider\", binding_1.serviceIdentifier, function () { return binding_1.provider(request.parentContext); });\n            }\n            else if (binding_1.type === literal_types_1.BindingTypeEnum.Instance && binding_1.implementationType !== null) {\n                result = instantiation_1.resolveInstance(binding_1.implementationType, childRequests, _resolveRequest(requestScope));\n            }\n            else {\n                var serviceIdentifier = serialization_1.getServiceIdentifierAsString(request.serviceIdentifier);\n                throw new Error(ERROR_MSGS.INVALID_BINDING_TYPE + \" \" + serviceIdentifier);\n            }\n            if (typeof binding_1.onActivation === \"function\") {\n                result = binding_1.onActivation(request.parentContext, result);\n            }\n            if (isSingleton) {\n                binding_1.cache = result;\n                binding_1.activated = true;\n            }\n            if (isRequestSingleton &&\n                requestScope !== null &&\n                !requestScope.has(binding_1.id)) {\n                requestScope.set(binding_1.id, result);\n            }\n            return result;\n        }\n    };\n};\nfunction resolve(context) {\n    var _f = _resolveRequest(context.plan.rootRequest.requestScope);\n    return _f(context.plan.rootRequest);\n}\nexports.resolve = resolve;\n"},"sourceMaps":{"js":{"version":3,"file":"resolver.js","sourceRoot":"","sources":["../../src/resolution/resolver.ts"],"names":[],"mappings":"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","sourcesContent":[null]}},"error":null,"hash":"15e94786cc44535ca7d342ddbd5c01cc","cacheData":{"env":{}}}